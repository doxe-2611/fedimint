<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Client library for fedimintd"><title>fedimint_client - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-4ee5002b.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="fedimint_client" data-themes="" data-resource-suffix="" data-rustdoc-version="1.84.0-nightly (a93c1718c 2024-10-24)" data-channel="nightly" data-search-js="search-c5a66128.js" data-settings-js="settings-0f613d39.js" ><script src="../static.files/storage-59e33391.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../fedimint_client/index.html">fedimint_<wbr>client</a><span class="version">0.5.0-alpha</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#client-library-for-fedimintd" title="Client library for fedimintd">Client library for fedimintd</a><ul><li><a href="#module-clients" title="Module Clients">Module Clients</a></li><li><a href="#client" title="Client">Client</a></li></ul></li></ul><h3><a href="#reexports">Crate Items</a></h3><ul class="block"><li><a href="#reexports" title="Re-exports">Re-exports</a></li><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#macros" title="Macros">Macros</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#constants" title="Constants">Constants</a></li><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#functions" title="Functions">Functions</a></li><li><a href="#types" title="Type Aliases">Type Aliases</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>fedimint_client</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/fedimint_client/lib.rs.html#1-3095">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="client-library-for-fedimintd"><a class="doc-anchor" href="#client-library-for-fedimintd">§</a>Client library for fedimintd</h2>
<p>This library provides a client interface to build module clients that can be
plugged together into a fedimint client that exposes a high-level interface
for application authors to integrate with.</p>
<h3 id="module-clients"><a class="doc-anchor" href="#module-clients">§</a>Module Clients</h3>
<p>Module clients have to at least implement the <a href="module/trait.ClientModule.html" title="trait fedimint_client::module::ClientModule"><code>module::ClientModule</code></a> trait
and a factory struct implementing <a href="module/init/trait.ClientModuleInit.html" title="trait fedimint_client::module::init::ClientModuleInit"><code>module::init::ClientModuleInit</code></a>. The
<code>ClientModule</code> trait defines the module types (tx inputs, outputs, etc.) as
well as the module’s <a href="sm/state/trait.State.html" title="trait fedimint_client::sm::state::State">state machines</a>.</p>
<h4 id="state-machines"><a class="doc-anchor" href="#state-machines">§</a>State machines</h4>
<p>State machines are spawned when starting operations and drive them
forward in the background. All module state machines are run by a central
<a href="sm/executor/struct.Executor.html" title="struct fedimint_client::sm::executor::Executor"><code>sm::Executor</code></a>. This means typically starting an operation shall return
instantly.</p>
<p>For example when doing a deposit the function starting it would immediately
return a deposit address and a <a href="../fedimint_core/core/struct.OperationId.html" title="struct fedimint_core::core::OperationId"><code>OperationId</code></a> (important concept, highly
recommended to read the docs) while spawning a state machine checking the
blockchain for incoming bitcoin transactions. The progress of these state
machines can then be <em>observed</em> using the operation id, but no further user
interaction is required to drive them forward.</p>
<h4 id="state-machine-contexts"><a class="doc-anchor" href="#state-machine-contexts">§</a>State Machine Contexts</h4>
<p>State machines have access to both a <a href="struct.DynGlobalClientContext.html" title="struct fedimint_client::DynGlobalClientContext">global
context</a> as well as to a <a href="module/trait.ClientModule.html#tymethod.context" title="method fedimint_client::module::ClientModule::context">module-specific
context</a>.</p>
<p>The global context provides access to the federation API and allows to claim
module outputs (and transferring the value into the client’s wallet), which
can be used for refunds.</p>
<p>The client-specific context can be used for other purposes, such as
supplying config to the state transitions or giving access to other APIs
(e.g. LN gateway in case of the lightning module).</p>
<h4 id="extension-traits"><a class="doc-anchor" href="#extension-traits">§</a>Extension traits</h4>
<p>The modules themselves can only create inputs and outputs that then have to
be combined into transactions by the user and submitted via
<a href="struct.Client.html#method.finalize_and_submit_transaction" title="method fedimint_client::Client::finalize_and_submit_transaction"><code>Client::finalize_and_submit_transaction</code></a>. To make this easier most module
client implementations contain an extension trait which is implemented for
<a href="struct.Client.html" title="struct fedimint_client::Client"><code>Client</code></a> and allows to create the most typical fedimint transactions with
a single function call.</p>
<p>To observe the progress each high level operation function should be
accompanied by one returning a stream of high-level operation updates.
Internally that stream queries the state machines belonging to the
operation to determine the high-level operation state.</p>
<h4 id="primary-modules"><a class="doc-anchor" href="#primary-modules">§</a>Primary Modules</h4>
<p>Not all modules have the ability to hold money for long. E.g. the lightning
module and its smart contracts are only used to incentivize LN payments, not
to hold money. The mint module on the other hand holds e-cash note and can
thus be used to fund transactions and to absorb change. Module clients with
this ability should implement <a href="module/trait.ClientModule.html#method.supports_being_primary" title="method fedimint_client::module::ClientModule::supports_being_primary"><code>ClientModule::supports_being_primary</code></a> and
related methods.</p>
<p>For a example of a client module see <a href="https://github.com/fedimint/fedimint/blob/master/modules/fedimint-mint-client/src/lib.rs">the mint client</a>.</p>
<h3 id="client"><a class="doc-anchor" href="#client">§</a>Client</h3>
<p>The <a href="struct.Client.html" title="struct fedimint_client::Client"><code>Client</code></a> struct is the main entry point for application authors. It is
constructed using its builder which can be obtained via <a href="struct.Client.html#method.builder" title="associated function fedimint_client::Client::builder"><code>Client::builder</code></a>.
The supported module clients have to be chosen at compile time while the
actually available ones will be determined by the config loaded at runtime.</p>
<p>For a hacky instantiation of a complete client see the <a href="https://github.com/fedimint/fedimint/blob/55f9d88e17d914b92a7018de677d16e57ed42bf6/fedimint-cli/src/ng.rs#L56-L73"><code>ng</code> subcommand of <code>fedimint-cli</code></a>.</p>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.derivable_secret"><code>pub use <a class="mod" href="../fedimint_derive_secret/index.html" title="mod fedimint_derive_secret">fedimint_derive_secret</a> as derivable_secret;</code></div></li></ul><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="api/index.html" title="mod fedimint_client::api">api</a></div></li><li><div class="item-name"><a class="mod" href="api_announcements/index.html" title="mod fedimint_client::api_announcements">api_<wbr>announcements</a></div></li><li><div class="item-name"><a class="mod" href="api_version_discovery/index.html" title="mod fedimint_client::api_version_discovery">api_<wbr>version_<wbr>discovery</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="mod" href="backup/index.html" title="mod fedimint_client::backup">backup</a></div><div class="desc docblock-short">Client backup</div></li><li><div class="item-name"><a class="mod" href="db/index.html" title="mod fedimint_client::db">db</a></div><div class="desc docblock-short">Database keys used by the client</div></li><li><div class="item-name"><a class="mod" href="envs/index.html" title="mod fedimint_client::envs">envs</a></div><div class="desc docblock-short">Environment variables</div></li><li><div class="item-name"><a class="mod" href="meta/index.html" title="mod fedimint_client::meta">meta</a></div><div class="desc docblock-short">Management of meta fields</div></li><li><div class="item-name"><a class="mod" href="module/index.html" title="mod fedimint_client::module">module</a></div><div class="desc docblock-short">Module client interface definitions</div></li><li><div class="item-name"><a class="mod" href="oplog/index.html" title="mod fedimint_client::oplog">oplog</a></div><div class="desc docblock-short">Operation log subsystem of the client</div></li><li><div class="item-name"><a class="mod" href="secret/index.html" title="mod fedimint_client::secret">secret</a></div><div class="desc docblock-short">Secret handling &amp; derivation</div></li><li><div class="item-name"><a class="mod" href="sm/index.html" title="mod fedimint_client::sm">sm</a></div><div class="desc docblock-short">Client state machine interfaces and executor implementation</div></li><li><div class="item-name"><a class="mod" href="transaction/index.html" title="mod fedimint_client::transaction">transaction</a></div><div class="desc docblock-short">Structs and interfaces to construct Fedimint transactions</div></li></ul><h2 id="macros" class="section-header">Macros<a href="#macros" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="macro" href="macro.sm_enum_variant_translation.html" title="macro fedimint_client::sm_enum_variant_translation">sm_<wbr>enum_<wbr>variant_<wbr>translation</a></div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.AdminCreds.html" title="struct fedimint_client::AdminCreds">Admin<wbr>Creds</a></div><div class="desc docblock-short">Admin (guardian) identification and authentication</div></li><li><div class="item-name"><a class="struct" href="struct.Client.html" title="struct fedimint_client::Client">Client</a></div><div class="desc docblock-short">Main client type</div></li><li><div class="item-name"><a class="struct" href="struct.ClientBuilder.html" title="struct fedimint_client::ClientBuilder">Client<wbr>Builder</a></div><div class="desc docblock-short">Used to configure, assemble and build <a href="struct.Client.html" title="struct fedimint_client::Client"><code>Client</code></a></div></li><li><div class="item-name"><a class="struct" href="struct.ClientHandle.html" title="struct fedimint_client::ClientHandle">Client<wbr>Handle</a></div><div class="desc docblock-short">User handle to <a href="struct.Client.html" title="struct fedimint_client::Client"><code>Client</code></a></div></li><li><div class="item-name"><a class="struct" href="struct.ClientModuleInstance.html" title="struct fedimint_client::ClientModuleInstance">Client<wbr>Module<wbr>Instance</a></div><div class="desc docblock-short">Resources particular to a module instance</div></li><li><div class="item-name"><a class="struct" href="struct.ClientStrong.html" title="struct fedimint_client::ClientStrong">Client<wbr>Strong</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">Internal self-reference to <a href="struct.Client.html" title="struct fedimint_client::Client"><code>Client</code></a></div></li><li><div class="item-name"><a class="struct" href="struct.ClientWeak.html" title="struct fedimint_client::ClientWeak">Client<wbr>Weak</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">Like <a href="struct.ClientStrong.html" title="struct fedimint_client::ClientStrong"><code>ClientStrong</code></a> but using a <a href="https://doc.rust-lang.org/nightly/alloc/sync/struct.Weak.html" title="struct alloc::sync::Weak"><code>Weak</code></a> handle to <a href="struct.Client.html" title="struct fedimint_client::Client"><code>Client</code></a></div></li><li><div class="item-name"><a class="struct" href="struct.DynGlobalClientContext.html" title="struct fedimint_client::DynGlobalClientContext">DynGlobal<wbr>Client<wbr>Context</a></div><div class="desc docblock-short">Global state and functionality provided to all state machines running in the
client</div></li><li><div class="item-name"><a class="struct" href="struct.GetInviteCodeRequest.html" title="struct fedimint_client::GetInviteCodeRequest">GetInvite<wbr>Code<wbr>Request</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="struct" href="struct.ModuleGlobalClientContext.html" title="struct fedimint_client::ModuleGlobalClientContext">Module<wbr>Global<wbr>Client<wbr>Context</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">Global state given to a specific client module and state. It is aware inside
which module instance and operation it is used and to avoid module being
aware of their instance id etc.</div></li><li><div class="item-name"><a class="struct" href="struct.ModuleRecoveryCompleted.html" title="struct fedimint_client::ModuleRecoveryCompleted">Module<wbr>Recovery<wbr>Completed</a></div></li><li><div class="item-name"><a class="struct" href="struct.ModuleRecoveryStarted.html" title="struct fedimint_client::ModuleRecoveryStarted">Module<wbr>Recovery<wbr>Started</a></div></li><li><div class="item-name"><a class="struct" href="struct.TransactionUpdates.html" title="struct fedimint_client::TransactionUpdates">Transaction<wbr>Updates</a></div><div class="desc docblock-short">See <a href="struct.Client.html#method.transaction_updates" title="method fedimint_client::Client::transaction_updates"><code>Client::transaction_updates</code></a></div></li><li><div class="item-name"><a class="struct" href="struct.TxAcceptedEvent.html" title="struct fedimint_client::TxAcceptedEvent">TxAccepted<wbr>Event</a></div></li><li><div class="item-name"><a class="struct" href="struct.TxCreatedEvent.html" title="struct fedimint_client::TxCreatedEvent">TxCreated<wbr>Event</a></div></li><li><div class="item-name"><a class="struct" href="struct.TxRejectedEvent.html" title="struct fedimint_client::TxRejectedEvent">TxRejected<wbr>Event</a></div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.AddStateMachinesError.html" title="enum fedimint_client::AddStateMachinesError">AddState<wbr>Machines<wbr>Error</a></div></li></ul><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.SUPPORTED_CORE_API_VERSIONS.html" title="constant fedimint_client::SUPPORTED_CORE_API_VERSIONS">SUPPORTED_<wbr>CORE_<wbr>API_<wbr>VERSIONS</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">List of core api versions supported by the implementation.
Notably <code>major</code> version is the one being supported, and corresponding
<code>minor</code> version is the one required (for given <code>major</code> version).</div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.IGlobalClientContext.html" title="trait fedimint_client::IGlobalClientContext">IGlobal<wbr>Client<wbr>Context</a></div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.box_up_state.html" title="fn fedimint_client::box_up_state">box_<wbr>up_<wbr>state</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">Not sure why I couldn’t just directly call <code>Box::new</code> ins
<a href="fn.states_to_instanceless_dyn.html" title="fn fedimint_client::states_to_instanceless_dyn"><code>states_to_instanceless_dyn</code></a>, but this fixed it.</div></li><li><div class="item-name"><a class="fn" href="fn.client_decoders.html" title="fn fedimint_client::client_decoders">client_<wbr>decoders</a></div></li><li><div class="item-name"><a class="fn" href="fn.get_decoded_client_secret.html" title="fn fedimint_client::get_decoded_client_secret">get_<wbr>decoded_<wbr>client_<wbr>secret</a></div><div class="desc docblock-short">Fetches the encoded client secret from the database and decodes it.
If an encoded client secret is not present in the database, or if
decoding fails, an error is returned.</div></li><li><div class="item-name"><a class="fn" href="fn.states_add_instance.html" title="fn fedimint_client::states_add_instance">states_<wbr>add_<wbr>instance</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="fn" href="fn.states_to_instanceless_dyn.html" title="fn fedimint_client::states_to_instanceless_dyn">states_<wbr>to_<wbr>instanceless_<wbr>dyn</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li></ul><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.AddStateMachinesResult.html" title="type fedimint_client::AddStateMachinesResult">AddState<wbr>Machines<wbr>Result</a></div></li><li><div class="item-name"><a class="type" href="type.ClientHandleArc.html" title="type fedimint_client::ClientHandleArc">Client<wbr>Handle<wbr>Arc</a></div></li><li><div class="item-name"><a class="type" href="type.InstancelessDynClientInput.html" title="type fedimint_client::InstancelessDynClientInput">Instanceless<wbr>DynClient<wbr>Input</a></div></li><li><div class="item-name"><a class="type" href="type.InstancelessDynClientInputBundle.html" title="type fedimint_client::InstancelessDynClientInputBundle">Instanceless<wbr>DynClient<wbr>Input<wbr>Bundle</a></div></li><li><div class="item-name"><a class="type" href="type.InstancelessDynClientInputSM.html" title="type fedimint_client::InstancelessDynClientInputSM">Instanceless<wbr>DynClient<wbr>InputSM</a></div></li><li><div class="item-name"><a class="type" href="type.InstancelessDynClientOutput.html" title="type fedimint_client::InstancelessDynClientOutput">Instanceless<wbr>DynClient<wbr>Output</a></div></li><li><div class="item-name"><a class="type" href="type.ModuleGlobalContextGen.html" title="type fedimint_client::ModuleGlobalContextGen">Module<wbr>Global<wbr>Context<wbr>Gen</a></div></li></ul></section></div></main></body></html>